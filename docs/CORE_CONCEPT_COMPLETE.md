# THERMOTECH-OPS 核心概念完整彙整

## 🎯 專案核心定義

### 本質
> "這不是一個任務追蹤系統，而是工廠的神經系統"

- **視覺風格**：Windows 95 / NT 4.0 復古工業風格
- **設計哲學**：「重工業感」而非「懷舊感」- 厚重、可靠、工程化
- **核心價值**：讓管理者完全掌控，讓同事無腦操作

---

## 👥 雙角色系統（您的核心需求）

### 角色 1：同事（Worker）
**心理模型**：「我今天要做什麼？」

**需求**：
1. 登入後直接看到「今日任務」
2. 快速明瞭的操作流程
3. 一鍵完成/回報
4. 需要照片就拍照
5. 緊急狀況一鍵回報
6. 知道例行公事, 系統會自動通知

**不需要**：
- 複雜的導航
- 多餘的資訊
- 需要思考的操作

### 角色 2：管理者（Manager）
**心理模型**：「誰在做什麼？誰沒做？誰做得最好？今天有甚麼事情在進行?這個月的重點日期是那些?」

**需求**：
1. **主管行事曆**：看到每個人每天應該完成的事
2. **獎金積分總表**：誰做了多少事、賺了多少分
3. **待辦事項總覽**：一眼看清所有人的狀態
4. **即時配發交辦**：可以隨時派發新任務
5. **天眼般的監控**：看到所有人的行為模式

---

## 🔧 三大功能支柱

### 1. 例行公事追蹤（Routine Tasks）
- **資料來源**：從 Excel 解析出來的 98 個任務
- **觸發方式**：Cron Job 每日凌晨 05:30 自動生成
- **邏輯**：
  - 每日任務 → 每天生成
  - 每週任務 → 每週一生成
  - 每月任務 → 每月 1 號生成

### 2. 突發事件回報（Incident Report）
- **特點**：無需預先定義，隨時可發起
- **類型**：設備故障、安全事件、物料短缺、其他
- **流程**：
  - 員工發起 → 拍照 + 說明
  - 系統立即通知主管
  - 主管查看並指派處理

### 3. 交辦事項配發（Ad-hoc Assignment）
- **特點**：主管可即時派發新任務
- **流程**：
  - 主管填寫表單
  - 指派對象、截止時間、積分
  - 立即通知員工
  - 員工在任務列表中看到

---

## 📊 資料結構（您提供的指南）

### Excel 表單三部分
```
[表頭] Row 2-3
  ├─ 姓名、員工編號、部門、職稱、主管
  
[任務矩陣] Row 4+, Col 0-2
  ├─ 工作內容（實際任務名稱）
  └─ #316, #310（廠別）
  
[權責矩陣] Row 4+, Col 3+
  ├─ 每日、每週、每月（頻率）
  └─ 右側人名欄位：
      ├─ ● = 主辦
      └─ ◎ = 協辦
```

### 資料庫映射
| CSV 資料 | 資料庫欄位 | 系統行為 |
|---------|-----------|---------|
| 姓名 | `profiles.full_name` | 顯示在介面 |
| 員工編號 | `profiles.employee_id` | 登入帳號 |
| 工作內容 | `task_definitions.title` | 任務名稱 |
| 每日/每週 | `task_definitions.frequency` | Cron Job 觸發 |
| 主辦 ● | `task_definitions.default_assignee_id` | 預設負責人 |
| 協辦 ◎ | `task_definitions.backup_assignee_id` | 代理人 |

---

## 🎨 Win95 設計系統（您的原始規格）

### 核心原則
1. **Binary Clarity**：按鈕不是凸起就是凹陷，沒有模糊狀態
2. **Heavy Industry**：軟體要像機台一樣厚重
3. **Visual Feedback**：每個點擊都要有明顯的視覺/聽覺回饋

### 色票（嚴格規範）
```css
--win-teal: #008080     /* 桌布背景 */
--win-grey: #C0C0C0     /* 視窗表面 */
--win-blue: #000080     /* 標題列 */
--win-white: #FFFFFF    /* 輸入框 */
--win-black: #000000    /* 邊框/文字 */
```

### 3D 導角物理學
```
凸起 (Outset):
  Top/Left: White (光照)
  Bottom/Right: Black (陰影)

凹陷 (Inset):
  Top/Left: Black (內陰影)
  Bottom/Right: White (內光照)
```

---

## 📱 雙軌 UX 設計

### PDA 模式（同事，<768px）
**設計原則**：
- "Big Buttons"（大按鈕）
- "No Dragging"（無拖曳）
- "Linear Flow"（線性流程）

**核心功能**：
```
┌────────────────────────┐
│ 今日任務列表            │
│ ├─ 任務 1 [完成]       │
│ ├─ 任務 2 [完成]       │
│ └─ 任務 3 [待辦]       │
│                         │
│ [緊急回報]             │
│ [我的積分]             │
└────────────────────────┘
```

### Desktop 模式（管理者，>=768px）
**設計原則**：
- "Win95 Experience"（多視窗、拖曳）
- "Data Density"（高密度資訊）
- "Dashboard"（全域監控）

**核心功能**：
```
┌──────────────────────────────────┐
│ [視窗1: 即時動態] [視窗2: 任務總覽] │
│ [視窗3: 行事曆]   [視窗4: 排行榜]  │
│ [視窗5: 快速操作] [視窗6: 異常通知] │
└──────────────────────────────────┘
```

---

## ✅ 已完成的工作

### Python 資料解析（100%）
- ✅ 7 個 Excel 檔案成功解析
- ✅ 21 位員工識別（7 位有編號 + 14 位協辦人）
- ✅ 98 個任務提取（含頻率、廠區、主辦/協辦關係）
- ✅ `final_data_package.json`（乾淨的資料包）

### 資料庫設計（100%）
- ✅ `docs/init_schema_and_seeds.sql`（38KB）
- ✅ 3 張主表：profiles, task_definitions, daily_assignments
- ✅ 自動觸發器：完成任務自動加分
- ✅ Seed Data：21 位員工 + 98 個任務的 INSERT 語句

### 專案架構（100%）
- ✅ Next.js 14 + TypeScript
- ✅ Supabase 客戶端配置
- ✅ 環境變數設定

### Win95 視覺系統（100%）
- ✅ `globals.css`（完整的 3D 導角效果）
- ✅ Win95Button, Win95Window 元件

---

## ❌ 目前的問題（您的反饋）

### UI 風格不符合期望
- 現在的介面可能太「現代化」
- 缺少真正的「工業厚重感」
- Win95 的「Binary Clarity」不夠明顯

### 概念偏差
- 可能過於強調「視覺展示」
- 忽略了「實際操作流程」
- 雙角色的「心理模型」不夠清晰

---

## 🔄 Claude 4.5 的重建方案

### 重建原則
1. **回歸本質**：這是工廠的「操作系統」，不是展示系統
2. **功能優先**：每個元件都必須有明確的「操作目的」
3. **嚴格遵循 Win95**：不只是「看起來像」，而是「操作起來像」
4. **尊重您的邏輯**：完全按照您的《資料結構指南》

### 重建步驟

#### 階段 1：釐清核心（立即執行）
1. **確認登入流程**：
   - 員工編號登入 → 系統判斷角色 → 自動導向對應介面

2. **確認同事端核心操作**：
   ```
   登入 → 看到今日任務 → 點擊任務 → 
   （如需照片）拍照 → 完成 → 積分+10 → 回到列表
   ```

3. **確認管理者端核心操作**：
   ```
   登入 → 看到儀表板 → 
   選項 A: 查看某人的任務狀態
   選項 B: 新增交辦事項給某人
   選項 C: 查看異常回報並處理
   ```

#### 階段 2：重寫 UI（按您的邏輯）
1. **移除現有的展示頁面**（不需要）
2. **建立真正的登入頁面**（員工編號登入）
3. **重寫同事端**：
   - 極簡主義：只有「任務列表」和「緊急回報」
   - 大按鈕：至少 60px 高度
   - 無多餘導航
4. **重寫管理者端**：
   - 主管行事曆（橫軸：日期，縱軸：人員）
   - 積分總表（可排序、可篩選）
   - 交辦功能（表單 → 立即派發）

#### 階段 3：整合真實資料
1. 執行資料庫 SQL
2. 整合 Supabase 查詢
3. 實作任務完成邏輯

---

## 🤔 需要您確認的問題

### 1. 登入流程
- 員工輸入「員工編號」
- 系統查詢資料庫 → 取得 role（admin/supervisor/user）
- 自動導向：
  - admin/supervisor → `/manager`
  - user → `/worker`
  
這樣對嗎？

### 2. 同事端的「今日任務」來源
- 從 `daily_assignments` 表查詢（由 Cron Job 每日生成）
- 還是從 `task_definitions` 表即時過濾？

### 3. 管理者端最重要的功能
請排序（1 最重要）：
- [ ] 主管行事曆（看每個人的任務）
- [ ] 積分排行榜
- [ ] 新增交辦事項
- [ ] 即時動態監控
- [ ] 異常通知處理

### 4. Win95 風格的「嚴格程度」
- 選項 A：100% 還原 Win95（包含音效、像素字型）
- 選項 B：保留核心特徵（3D 導角、色票）但適度現代化
- 選項 C：僅視覺致敬，操作流程現代化

---

## 📝 請您回覆

1. **您最不滿意現在的哪個部分？**
   - UI 太花俏？
   - 操作流程不直覺？
   - 缺少核心功能？

2. **您心目中的「理想畫面」是什麼？**
   - 同事登入後應該看到什麼？
   - 管理者登入後應該看到什麼？

3. **我現在應該：**
   - 選項 A：全部砍掉重練
   - 選項 B：保留架構，重寫 UI
   - 選項 C：修改現有頁面

**請告訴我您的想法，我將以 Claude 4.5 的風格，完全按照您的邏輯重新建構！** 💪


